<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>/necroit/</title>
<style>
html, body {
  margin:0;
  padding:0;
  height:100%;
  overflow:hidden;
  background:#1a1a1a;
  font-family: 'Courier New', monospace;
  color:#cccccc;
  cursor:none;
}
.site {
  width:100%;
  height:100%;
  position:relative;
  display:flex;
  justify-content:center;
  align-items:center;
  transition: filter 0.5s ease, opacity 0.5s ease;
}
.site.preload-active {
  filter: blur(8px);
  pointer-events: none;
}
#preloader {
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  background: rgba(20,20,20,0.6);
  backdrop-filter: blur(6px);
  z-index: 9999;
  color: #cccccc;
  user-select:none;
  -webkit-user-select:none;
  cursor:pointer;
  flex-direction:column;
}
#preloader .title {
  font-size:64px;
  letter-spacing:4px;
  margin-bottom:12px;
  font-weight:700;
}
#preloader .subtitle {
  font-size:14px;
  opacity:0.85;
}
canvas {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
}
#cursorCanvas { z-index:2; }
.panel {
  position:absolute;
  top:50%;
  left:50%;
  transform: translate(-50%, -50%) scale(0.95);
  z-index:1;
  background: rgba(40,40,40,0.7);
  border:2px solid rgba(180,180,180,0.5);
  border-radius:12px;
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
  padding: 20px 30px 10px 30px;
  width:360px;
  box-sizing:border-box;
  opacity:0;
  filter: blur(15px);
  pointer-events:none;
  transition: opacity 0.8s ease, transform 0.8s ease, filter 0.8s ease;
}
.panel.visible {
  opacity:1;
  filter: blur(0);
  transform: translate(-50%, -50%) scale(1);
  pointer-events:auto;
}
.panel:hover {
  transform: translate(-50%, -50%) scale(1.05);
}
.line {
  display:flex;
  justify-content: space-between;
  margin-bottom:10px;
}
.line:last-child { margin-bottom:0; }
a {
  color:#cccccc;
  text-decoration:none;
  cursor:none;
}
a:hover {
  text-decoration:underline;
}
#musicStatus {
  position:fixed;
  bottom:12px;
  right:12px;
  font-size:12px;
  color:#cccccc;
  opacity:0.9;
  z-index:2000;
  pointer-events:none;
}
</style>
</head>
<body>
<div id="preloader" aria-hidden="false">
  <div class="title">Welcome</div>
  <div class="subtitle">Нажмите в любом месте, чтобы продолжить</div>
</div>
<div class="site preload-active" id="site">
  <canvas id="bgCanvas"></canvas>
  <canvas id="cursorCanvas"></canvas>
  <div class="panel" id="terminalPanel">
    <div class="line">
      GitHub: <a href="https://github.com/necroit" target="_blank" rel="noopener">git.necroit</a>
    </div>
    <div class="line">
      Telegram: <a href="https://t.me/necroit" target="_blank" rel="noopener">tg.necroit</a>
    </div>
    <div class="line">
      Discord: <a href="https://discord.com/users/1355539557369774306" target="_blank" rel="noopener">ds.necrosuit</a>
    </div>
    <div class="line">
      Server: <a href="https://discord.gg/Ym97ApF6Ha" target="_blank" rel="noopener">com.XenoGem</a>
    </div>
    <div class="line">
      Steam: <a href="https://steamcommunity.com/id/necrosuit" target="_blank" rel="noopener">stm.necroit</a>
    </div>
  </div>
</div>
<audio id="bgMusic" preload="auto">
  <source src="assets/music.mp3" type="audio/mpeg">
  Ваш браузер не поддерживает аудио.
</audio>
<div id="musicStatus" aria-hidden="true" style="display:none">music$mirrors-demo</div>
<script>
const preloader = document.getElementById('preloader');
const site = document.getElementById('site');
const panel = document.getElementById('terminalPanel');
const music = document.getElementById('bgMusic');
const musicStatus = document.getElementById('musicStatus');
const bgCanvas = document.getElementById('bgCanvas');
const bgCtx = bgCanvas.getContext('2d');
const cursorCanvas = document.getElementById('cursorCanvas');
const cursorCtx = cursorCanvas.getContext('2d');
let W = window.innerWidth;
let H = window.innerHeight;
bgCanvas.width = W;
bgCanvas.height = H;
cursorCanvas.width = W;
cursorCanvas.height = H;
const particles = [];
const particleCount = 120;
const linkDistance = 120;
const minDistance = 15;
const controlPoint = {x: W/2, y: H/2};
const highlightDistance = 100;
class Particle {
  constructor() {
    this.x = Math.random()*W;
    this.y = Math.random()*H;
    this.radius = 2 + Math.random()*2;
    this.targetX = this.x;
    this.targetY = this.y;
    this.offsetX = (Math.random()*40 +10) * (Math.random()<0.5?-1:1);
    this.offsetY = (Math.random()*40 +10) * (Math.random()<0.5?-1:1);
    this.highlight = 0;
  }
  update() {
    const dx = controlPoint.x - this.x;
    const dy = controlPoint.y - this.y;
    const dist = Math.hypot(dx,dy);
    this.highlight = Math.max(0, Math.min(1, (highlightDistance-dist)/highlightDistance));
    if(dist < 75){
      const t = 0.02;
      this.x += dx*t;
      this.y += dy*t;
      this.targetX = this.x + this.offsetX;
      this.targetY = this.y + this.offsetY;
    } else {
      const t = 0.05;
      this.x += (this.targetX - this.x) * t;
      this.y += (this.targetY - this.y) * t;
    }
    for(let p of particles){
      if(p === this) continue;
      const dxp = this.x - p.x;
      const dyp = this.y - p.y;
      const d = Math.hypot(dxp,dyp);
      if(d < minDistance && d > 0){
        const repulse = (minDistance - d)/d * 0.1;
        this.x += dxp * repulse;
        this.y += dyp * repulse;
      }
    }
    const margin = 5;
    this.x = Math.max(margin, Math.min(W - margin, this.x));
    this.y = Math.max(margin, Math.min(H - margin, this.y));
  }
  draw(ctx) {
    const gray = 150 + this.highlight*105;
    ctx.fillStyle = `rgba(${gray},${gray},${gray},0.8)`;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius,0,Math.PI*2);
    ctx.fill();
  }
}
for(let i=0;i<particleCount;i++) particles.push(new Particle());
window.addEventListener('mousemove', e=>{ controlPoint.x = e.clientX; controlPoint.y = e.clientY; });
let cursorHover = false;
document.querySelectorAll('a').forEach(link => {
  link.addEventListener('mouseenter', () => cursorHover = true);
  link.addEventListener('mouseleave', () => cursorHover = false);
});
function drawBackground(){
  bgCtx.clearRect(0,0,W,H);
  for(let i=0;i<particles.length;i++){
    for(let j=i+1;j<particles.length;j++){
      const a = particles[i];
      const b = particles[j];
      const dx = a.x-b.x;
      const dy = a.y-b.y;
      const dist = Math.hypot(dx,dy);
      if(dist < linkDistance && dist > minDistance){
        const alpha = 0.5*(1-dist/linkDistance) + 0.5*(a.highlight+b.highlight);
        const gray = Math.floor(150 + 105*((a.highlight+b.highlight)/2));
        bgCtx.strokeStyle = `rgba(${gray},${gray},${gray},${Math.min(1, alpha)})`;
        bgCtx.lineWidth = 0.8;
        bgCtx.beginPath();
        bgCtx.moveTo(a.x, a.y);
        bgCtx.lineTo(b.x, b.y);
        bgCtx.stroke();
      }
    }
  }
  for(let p of particles){ p.update(); p.draw(bgCtx); }
}
let glowIntensity = 0;
let targetGlow = 0;
function drawCursor(){
  cursorCtx.clearRect(0,0,W,H);
  targetGlow = cursorHover ? 15 : 0;
  glowIntensity += (targetGlow - glowIntensity) * 0.1;
  cursorCtx.fillStyle = '#cccccc';
  cursorCtx.beginPath();
  cursorCtx.arc(controlPoint.x, controlPoint.y, 5, 0, Math.PI*2);
  cursorCtx.fill();
  if(glowIntensity > 0.1){
    cursorCtx.save();
    cursorCtx.shadowBlur = glowIntensity;
    cursorCtx.shadowColor = 'rgba(200,200,200,0.8)';
    cursorCtx.fillStyle = 'rgba(200,200,200,0.2)';
    cursorCtx.beginPath();
    cursorCtx.arc(controlPoint.x, controlPoint.y, 5, 0, Math.PI*2);
    cursorCtx.fill();
    cursorCtx.restore();
  }
}
function animate(){ drawBackground(); drawCursor(); requestAnimationFrame(animate); }
animate();
window.addEventListener('resize', ()=>{ W = window.innerWidth; H = window.innerHeight; bgCanvas.width = W; bgCanvas.height = H; cursorCanvas.width = W; cursorCanvas.height = H; });
function startSite() {
  if (!site.classList.contains('preload-active')) return;
  site.classList.remove('preload-active');
  preloader.style.transition = 'opacity 0.45s ease';
  preloader.style.opacity = '0';
  preloader.setAttribute('aria-hidden', 'true');
  setTimeout(()=>{ preloader.style.display = 'none'; }, 480);
  setTimeout(()=>panel.classList.add('visible'), 120);
  if (music) {
    music.volume = 0.1;
    const playPromise = music.play();
    if (playPromise !== undefined) {
      playPromise.then(()=> { musicStatus.style.display = 'block'; })
        .catch((err)=> { console.warn('Music playback was prevented by the browser:', err); });
    }
  }
}
preloader.addEventListener('click', startSite);
preloader.addEventListener('keydown', (e)=>{ if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); startSite(); } });
preloader.setAttribute('tabindex','0');
preloader.focus();
</script>
</body>
</html>
